# -*- coding: utf-8 -*-

<WorkoutSummaryContent>:
    orientation: 'vertical'
    size_hint_y: None
    height: "300dp"

    MDScrollView:
        do_scroll_x: False
        
        MDLabel:
            id: content
            text: root.summary_text
            font_style: "Body"
            role: "large"
            markup: True
            size_hint_y: None
            height: self.texture_size[1]
            #padding: "10dp", "10dp", "12dp", "8dp"
            text_size: self.width, None


<NewSetRow>:
    adaptive_height: True
    spacing: "8dp"
    padding: ("8dp", 0, 0, "24dp")

    MDLabel:
        text: root.set_number
        size_hint_x: None
        width: "36dp"
        halign: "center"
        valign: "center"
        bold: True
        text_size: self.size


    MDTextField:
        id: weight_input
        size_hint_x: 0.38
        text: root.weight
        on_text: root.weight = self.text
        input_filter: "float"
        error: root.weight_error

        MDTextFieldHintText:
            text: "Вес"

        MDTextFieldHelperText:
            text: "Вес: 0 - 999 кг"
            mode: "on_error"


    MDTextField:
        id: reps_input
        size_hint_x: 0.38
        text: root.reps
        on_text: root.reps = self.text
        input_filter: "int"
        error: root.reps_error

        MDTextFieldHintText:
            text: "Повт."

        MDTextFieldHelperText:
            text: "Повторения: 0 - 99"
            mode: "on_error"

    MDButton:
        size_hint_x: None
        width: "48dp"
        on_release: root.panel_ref.remove_set_row(root)
        pos_hint: {"center_y": 0.5}
        MDButtonIcon:
            icon: "trash-can-outline"


<ExpansionPanelItem>:

    MDExpansionPanelHeader:
        adaptive_height: True

        MDBoxLayout:
            adaptive_height: True
            padding: "12dp", "12dp", "6dp", "12dp"
            spacing: "12dp"
            ripple_effect: False

            MDBoxLayout:
                id: text_container
                orientation: 'vertical'
                adaptive_height: True
                spacing: '4dp'

                MDListItemHeadlineText:
                    text: root.exercise_name
                    size_hint_y: None
                    height: self.texture_size[1]
                    text_size: self.width, None
                    shorten: False

                MDListItemSupportingText:
                    text: root.target_info
                    size_hint_y: None
                    height: self.texture_size[1]
                    text_size: self.width, None
                    shorten: False

                MDListItemTertiaryText:
                    text: root.last_workout_info
                    size_hint_y: None
                    height: self.texture_size[1]
                    text_size: self.width, None
                    shorten: False

            TrailingPressedIconButton:
                id: chevron
                icon: "chevron-right"
                on_release: app.tap_expansion_chevron(root, self)
                size_hint_x: None
                width: "48dp"
                pos_hint: {'center_y': .5}

    MDExpansionPanelContent:
        orientation: 'vertical'
        adaptive_height: True

        MDBoxLayout:
            id: new_sets_container
            orientation: 'vertical'
            adaptive_height: True
            spacing: "4dp"
            padding: "8dp"

        MDButton:
            on_release: root.add_set_row()
            pos_hint: {'center_x': 0.5}
            style: "filled"

            MDButtonText:
                text: "Добавить подход"


<WorkoutScreen>:
    name: 'workout'

    MDBoxLayout:
        orientation: 'vertical'

        MDLabel:
            text: "Тренировка"
            halign: "center"
            font_style: 'Title'
            adaptive_height: True

        ScrollView:
            size_hint_y: 0.9

            MDList:
                id: today_workout_container
                adaptive_height: True
                padding: "12dp"
        
        MDButton:
            id: save_workout_btn
            on_release: root.show_save_confirmation_dialog()
            pos_hint: {'center_x': 0.5}
            size_hint: (0.8, None)
            height: "48dp"
            style: "filled"
            
            MDButtonText:
                text: "Сохранить тренировку"

